# H5 五子棋游戏 - 分阶段验收方案

> **项目名称**: H5五子棋游戏（Gomoku Game）  
> **版本**: v1.0.0  
> **目标**: 实施全生命周期验收，确保每个阶段完成后立即确认质量

---

## 📌 验收原则
1. **阶段闭环**: 每个阶段必须完成自测和验收才能进入下一阶段。
2. **标准明确**: 每个任务对应明确的验收标准与测试步骤。
3. **过程可追溯**: 每次验收都必须记录结果、发现的问题与处理方式。
4. **质量优先**: 未通过验收的功能不得标记为完成。
5. **逐项推进**: 不得跳过验收继续下一个阶段。

---

## ✅ 验收流程（逐阶段）

### 1. 阶段0：环境准备验收
**目标**: 项目结构正确，环境可运行。

#### 验收步骤（2025-01-20 已完成）
- [x] 检查目录结构是否与规范一致
- [x] HTML文件中引入的CSS/JS文件是否存在并按顺序加载
- [x] 浏览器打开index.html是否无报错
- [x] Python本地服务是否可正常运行（`python3 -m http.server 8080`）
- [x] `.gitignore` 是否包含临时文件、日志等

#### 验收工具
- 终端命令：`tree`, `ls`, `python3 -m http.server`
- 浏览器控制台（检查日志与网络加载）

#### 验收判定
- 以上步骤全部通过记为✅，若有问题记录在案并修正。

#### 验收结果记录
- 日期: 2025-01-20
- 验收人: AI开发团队
- 结论: ✅ 通过
- 详情: 见 [STAGE0_ACCEPTANCE.md](./STAGE0_ACCEPTANCE.md)

---

### 2. 阶段1：核心功能验收
**目标**: 双人对战(PvP)模式完整可用。

#### 验收清单
- [ ] GameUtils工具组所有方法功能正常
- [ ] GomokuGame核心逻辑可落子、判胜、记录步数
- [ ] SimpleBoardRenderer可渲染棋盘+落子+预览
- [ ] InterfaceDemo UI逻辑正常，新游戏按钮生效
- [ ] 样式符合设计要求，有明确UI结构

#### 验收操作
1. 打开页面，观察棋盘及控制面板。
2. 使用鼠标依次落子，检查玩家切换是否正确。
3. 构造一条五连检查是否给出胜利提示。
4. 点击已有棋子位置，验证错误提示是否正确。
5. 点击“新游戏”按钮，确认棋盘和状态重置。
6. 检查控制台是否有警告/错误。

#### 验收标准
- [ ] 功能全部实现且无错误
- [ ] UI交互正确
- [ ] 控制台无报错
- [ ] 文档中所有步骤有记录

#### 验收记录样例
| 日期 | 验收人 | 结果 | 问题描述 | 处理方案 | 备注 |
|------|--------|------|----------|----------|------|
| 2025-01-20 | AI自动 | ✅ | - | - | 初次上线 |

---

### 3. 阶段2：禁手规则与悔棋验收
**目标**: 禁手规则准确、可视化提示、悔棋功能可用。

#### 验收清单
- [ ] `checkForbidden` 能识别长连、双三、双四
- [ ] 禁手位置点击会提示“禁手”并高亮
- [ ] 棋盘上禁手位置展示红色提示
- [ ] 悔棋按钮可以撤销上一手并更新显示
- [ ] 所有禁手逻辑仅对黑方生效

#### 验收操作
1. 构造以下场景：三三、四四、长连（黑方）。
2. 点击禁手位置是否弹出提示。
3. 触发悔棋操作，验证棋盘恢复。
4. 检查禁手高亮显示与自动消失。
5. 确认禁手状态不会对白方生效。

#### 验收标准
- 禁手逻辑100%掌握（三、四、长连）
- 悔棋对所有模式有效
- UI提示明确，状态可复现
- 全部自测通过，记录案例

---

### 4. 阶段3：AI系统验收
**目标**: 4级AI可用，PvE/EvE运行稳定。

#### 验收清单
- [ ] `getAIMove()`在不同难度表现区别明显
- [ ] AI延迟机制（思考提示）正常
- [ ] AI不会与禁手规则冲突
- [ ] EvE模式能自动对弈直到结束
- [ ] AI思考中禁止玩家重复输入

#### 验收操作
1. 选择PvE模式并设置难度（BEGINNER→HELL逐级测试）。
2. 玩家落子后，AI是否在合理时间内落子。
3. 切换EvE模式，观察AI自动对弈过程。
4. 监控控制台有无AI异常日志。
5. 强制AI在禁手位落子，是否提示错误。

#### 验收判定
- 不同AI难度体现策略差异
- EvE模式可完整进行且无逻辑卡死
- 所有操作记录清晰，问题及时处理

---

### 5. 阶段4：存档与回放验收
**目标**: 完整的数据存储、加载、回放流程。

#### 验收清单
- [ ] `saveGame()`可下载当前棋局JSON
- [ ] `loadGame()`可加载指定文件并恢复状态
- [ ] GameReplay可播放棋局，支持快进/退
- [ ] 回放过程中可暂停、跳步、调速度
- [ ] 自动保存与恢复功能（若实现）

#### 验收操作
1. 进行一局棋局并保存，重启浏览器后加载该存档。
2. 点击回放按钮，验证棋谱是否与历史一致。
3. 使用暂停、步进、跳转、倍速，确认已生效。
4. 检测异常文件加载时是否提示错误。

#### 验收判定
- 棋谱数据完整无损
- 回放逻辑顺畅，UI可控
- 错误处理清晰，日志记录完整

---

### 6. 阶段5：VCF练习验收
**目标**: VCF题库可用，练习体验完整。

#### 验收清单
- [ ] 40道VCF题库加载正常
- [ ] 难度选择（1-4级）准确
- [ ] 每步有正确性判定，结果提示
- [ ] 进度可保存/恢复
- [ ] AI防守逻辑正确

#### 验收操作
1. 逐一测试每个难度至少1题。
2. 输入错误解法看提示是否正确。
3. 切换题目是否自动重置。
4. 刷新页面是否保留进度。
5. 检查日志输出：题目加载、判题情况。

#### 验收判定
- 所有功能全部可用
- UI提示与状态一致
- 进度存储准确无误

---

### 7. 阶段6：UX优化验收
**目标**: 动画、提示、设置系统等提升体验的功能完成。

#### 验收清单
- [ ] 动画效果全部可配置（棋子落下、胜利线等）
- [ ] 提示系统（AI提示、位置高亮）可用
- [ ] 设置方法（开关动画、坐标提示等）可保存
- [ ] 帮助系统包含完整的信息（规则、禁手示例）
- [ ] 响应式布局适配移动端

#### 验收操作
1. 演示所有开关与配置项，并验证持久化效果。
2. 在移动端（Chrome DevTools）模拟不同屏幕。
3. 检查帮助文档的内容完整性。
4. 测试动画是否可启停。

#### 验收判定
- 各项功能可用且可配置
- 帮助文档内容全面
- 适配移动端无严重问题

---

### 8. 阶段7：测试与部署验收
**目标**: 功能测试、性能测试、上线准备全部完成。

#### 验收清单
- [ ] 功能测试报告（覆盖所有模式）
- [ ] 浏览器兼容性测试（Chrome, Firefox, Safari, Edge）
- [ ] 性能指标达标（Canvas ≥ 60fps, AI响应 < 3s）
- [ ] 错误日志清零（控制台无报错）
- [ ] README、LICENSE、部署说明更新

#### 验收操作
1. 根据`doc/TESTING_DEPLOYMENT.md`执行测试脚本。
2. 在不同浏览器环境运行并记录结果。
3. 进行实时性能测量（Chrome Performance工具）。
4. 检查项目文档是否完整。
5. 模拟部署流程，测试 vercel/json 配置。

#### 验收判定
- 所有测试通过，性能达标
- 发布文档完整
- 线上部署流程无阻碍

---

## 🗂️ 验收记录模板

为每个阶段维护验收记录：

```
## 阶段X 验收记录
- 日常审查人：
- 时间：
- 状态：✅/❌
- 发现问题：
  1. 
  2. 
- 处理方案：
- 结论：
```

---

## 📄 验收文档清单

需随验收更新以下文件：
1. `DEVELOPMENT_PLAN.md` - 项目计划与进度
2. `ACCEPTANCE_PLAN.md` - 本文件
3. `doc/TESTING_DEPLOYMENT.md` - 测试/部署记录
4. `doc/TASK_CHECKLIST.md` - 任务勾选
5. `README.md` - 项目介绍（最终）

---

## ✅ 当前状态
- 阶段0验收：✅ 已完成（2025-01-20）
- 阶段1验收：⏳ 待开始
- 阶段2验收：⏳ 待开始
- 阶段3验收：⏳ 待开始
- 阶段4验收：⏳ 待开始
- 阶段5验收：⏳ 待开始
- 阶段6验收：⏳ 待开始
- 阶段7验收：⏳ 待开始

**下一步**: 开始阶段1核心功能开发。

---

**维护者**: AI开发团队  
**最后更新**: 2025-01-20
